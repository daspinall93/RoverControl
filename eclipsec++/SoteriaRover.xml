<?xml version="1.0"?>
<mavlink>
    <version>3</version>  
    <dialect>0</dialect>
    <enums>
        <!--Locomotion Module enumertions-->
        <enum name="LOCOM_COMAMND_ID">
            <description>Commands for the locomotion module</description>
            <entry value="0" name="LOCOM_COMMAND_STOP">
                <description>Command the locom module to stop the rover</description>
            </entry>
            <entry value="1" name="LOCOM_COMMAND_STRAIGHT_FORWARD">
                <description>Command the rover to drive straight forward</description>
            </entry>
            <entry value="2" name="LOCOM_COMMAND_STRAIGHT_BACKWARD">
                <description>Command the rover to drive straight backward</description>
            </entry>
            <entry value="3" name="LOCOM_COMMAND_TURN_RIGHT">
                <description>Command the rover to turn right</description>
            </entry>
            <entry value="4" name="LOCOM_COMMAND_TURN_LEFT">
                <description>Command the rover to turn left</description>
            </entry>
        </enum>
        <enum name="LOCOM_MODE">
            <description>Commands for the locomotion module</description>
            <entry value="0" name="LOCOM_MODE_STOP">
                <description>Command the locom module to stop the rover</description>
            </entry>
            <entry value="1" name="LOCOM_MODE_STRAIGHT_FORWARD">
                <description>Command the rover to drive straight forward</description>
            </entry>
            <entry value="2" name="LOCOM_MODE_STRAIGHT_BACKWARD">
                <description>Command the rover to drive straight backward</description>
            </entry>
            <entry value="3" name="LOCOM_MODE_TURN_RIGHT">
                <description>Command the rover to turn right</description>
            </entry>
            <entry value="4" name="LOCOM_MODE_TURN_LEFT">
                <description>Command the rover to turn left</description>
            </entry>
        </enum> 
        <!-- Motor Module enumerations -->
        <enum name="MOTOR_COMMAND_ID">
            <description>Mode of each motor (i.e m1 and m2)</description>
            <entry value="0" name="MOTOR_COMMAND_STOP">
                <description>Command to stop motor</description>
            </entry>
            <entry value="1" name="MOTOR_COMMAND_FORWARD">
                <description>Command for motor to travel forward</description>
            </entry>
            <entry value="2" name="MOTOR_COMMAND_BACKWARD">
                <description>Command for motor to go backward</description>
            </entry>
        </enum>
        <enum name="MOTOR_MODE">
            <description>Mode of each motor (i.e m1 and m2)</description>
            <entry value="0" name="MOTOR_MODE_STOP">
                <description>The motor is in stopped mode</description>
            </entry>
            <entry value="1" name="MOTOR_MODE_FORWARD">
                <description>The motor is in forward mode</description>
            </entry>
            <entry value="2" name="MOTOR_MODE_BACKWARD">
                <description>The motor is in backward mode</description>
            </entry>
        </enum>
    </enums>
    <messages>
        <!-- HKTM packets -->
        <message id="0" name="HEARTBEAT">
            <description>The heartbeat message shows that a system is present and responding. Currently contains the locomotion module mode and mavlink version</description>
            <field type="uint8_t" name="locom_mode" enum="LOCOM_MODE">Mode of the locomotion module</field>
            <field type="uint8_t" name="motor1_mode" enum="MOTOR_MODE">Mode of motor 1</field>
            <field type="uint8_t" name="motor2_mode" enum="MOTOR_MODE">Mode of motor 2</field>
            <field type="uint8_t_mavlink_version" name="mavlink_version">MAVLink version, not writable by user, gets added by protocol because of magic data type: uint8_t_mavlink_version</field>
        </message>
        
        <!-- Locomotion module commands, reports, state and config -->
        <message id="3" name="LOCOM_COMMAND">
            <description>A command to the locomotion module</description>
            <field type="uint8_t" name="commandid" enum="LOCOM_COMMAND_ID">The ID of the locomotion module command</field>
            <field type="uint64_t" name="duration_ms">duration of the locomotion command</field>
            <field type="uint32_t" name="power_per">Power (0-100%) of the commanded locomotion manoeuvre</field>
            <field type="uint8_t" name="newCommand">new command boolean</field>
        </message>
        <message id="4" name="LOCOM_REPORT">
            <description>The report structure from the locomotion module</description>
            <field type="uint64_t" name="modeElapsedTime_ms">The ID of the locomotion module command</field>
            <field type="uint8_t" name="mode" enum="LOCOM_MODE">duration of the locomotion command</field>        
        </message>
        <message id="5" name="LOCOM_STATE">
            <description>The state structure of the locomotion module</description>
            <field type="uint64_t" name="modeStartTime_ms">The ID of the locomotion module command</field>
            <field type="uint64_t" name="modeElapsedTime_ms">The ID of the locomotion module command</field>
            <field type="uint8_t" name="mode" enum="LOCOM_MODE">duration of the locomotion command</field>
        </message>       
         <!-- <message id="6" name="LOCOM_CONFIGURATION">
            <description>A strcuture defining the configuration/settings of the locomotion module</description>
        </message> -->

        <!-- Motor module commands, reports, state and config-->
        <message id="10" name="MOTOR_COMMAND">
            <field type="uint8_t" name="m1_commandid" enum="MOTOR_COMMAND_ID"></field>
            <field type="uint8_t" name="m1_newCommand"></field>
            <field type="uint32_t" name="m1_power_per"></field>
            <field type="uint8_t" name="m2_commandid" enum="MOTOR_COMMAND_ID"></field>
            <field type="uint8_t" name="m2_newCommand"></field>
            <field type="uint32_t" name="m2_power_per"></field>
        </message>
        <message id="11" name="MOTOR_REPORT">
            <field type="uint8_t" name="m1_mode" enum="MOTOR_MODE"></field>
            <field type="uint32_t" name="m1_pwmInput"></field>
            <field type="uint8_t" name="m2_mode" enum="MOTOR_MODE"></field>
            <field type="uint32_t" name="m2_pwmInput"></field>
        </message>
        
        <!-- Comms modile commands, reports, state and config -->
        <!-- <message id="15" name="COMMS_COMMAND">
            <field type="uint8_t[2041]" name="msgSentBuffer"></field>
            <field type="uint32_t" name="BufferLength"></field>
        </message>
        <message id="16" name="COMMS_REPORT">
            <field type="uint32_t" name="numBytesRec"></field>
            <field type="uint32_t" name="numBytesSent"></field>
            <field type="uint8_t[2041]" name="msgRecBuffer"></field>
        </message> -->
        
        <message id="20" name="INERT_REPORT">
            <field type="int32_t" name="accX_dig"></field>
            <field type="int32_t" name="accY_dig"></field>
            <field type="int32_t" name="accZ_dig"></field>
            <field type="int32_t" name="gyroX_dig"></field>
            <field type="int32_t" name="gyroY_dig"></field>
            <field type="int32_t" name="gyroZ_dig"></field>
        </message>
        
    </messages>
</mavlink>